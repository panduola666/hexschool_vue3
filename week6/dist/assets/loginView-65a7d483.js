import{m as d,b as u}from"./axios-61e5193b.js";import{u as l}from"./userStore-61de1e54.js";import{l as m,n as c}from"./runtime-dom.esm-bundler-466e0a51.js";import{b7 as h,ak as f,m as g,n as o,b4 as p}from"./plugin-vueexport-helper-6c478766.js";import"./index-f28331f7.js";const{VITE_URL:w}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"panduola666",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},b={data(){return{user:{username:"",password:""}}},computed:{...d(l,["isLogin"])},methods:{...u(l,["checkLogin"]),login(){this.$http.post(`${w}/admin/signin`,this.user).then(t=>{const{expried:e,message:i,token:a}=t.data;document.cookie=`token=${a}; expires=${new Date(e)};`,alert(i),this.$http.defaults.headers.common.Authorization=a,this.$router.push("/admin/products")}).catch(t=>{alert(t.response.data.message)})}},mounted(){document.cookie.match("token")&&(this.checkLogin(),this.isLogin&&(alert("登入成功"),this.$router.push("/admin/products")))}},_=o("label",{for:"email",class:"form-label"},"Email",-1),k=o("label",{for:"password",class:"form-label"},"Password",-1),E=o("button",{type:"submit",class:"btn btn-primary rounded py-2 fs-5"}," 登入 ",-1);function V(t,e,i,a,r,n){return f(),g("form",{action:"",class:"d-grid gap-3 p-3",onSubmit:e[2]||(e[2]=c((...s)=>n.login&&n.login(...s),["prevent"]))},[o("div",null,[_,p(o("input",{type:"email",name:"Email",id:"email",placeholder:"請輸入 Email",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>r.user.username=s),required:"",autocomplete:""},null,512),[[m,r.user.username]])]),o("div",null,[k,p(o("input",{type:"password",name:"password",id:"password",placeholder:"請輸入 Password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>r.user.password=s),required:"",autocomplete:""},null,512),[[m,r.user.password]])]),E],32)}const D=h(b,[["render",V]]);export{D as default};
