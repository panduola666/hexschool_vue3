import{b as d}from"./axios-4560820d.js";import{u as p}from"./userStore-07396f3d.js";import{l,n as u}from"./runtime-dom.esm-bundler-76881a9c.js";import{b7 as c,ak as h,m as f,n as o,b4 as m}from"./plugin-vueexport-helper-b8bbd0ea.js";import"./index-70b63161.js";const{VITE_URL:w}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"panduola666",BASE_URL:"/hexschool_vue3/week6/dist/",MODE:"production",DEV:!1,PROD:!0},_={data(){return{user:{username:"",password:""}}},methods:{...d(p,["checkLogin"]),login(){this.$http.post(`${w}/admin/signin`,this.user).then(t=>{const{expried:e,message:n,token:a}=t.data;document.cookie=`token=${a}; expires=${new Date(e)};`,alert(n),this.$http.defaults.headers.common.Authorization=a,this.$router.push("/admin")}).catch(t=>{alert(t.response.data.message)})}},mounted(){console.log(),document.cookie.match("token")&&(alert("登入成功"),this.checkLogin())}},b=o("label",{for:"email",class:"form-label"},"Email",-1),g=o("label",{for:"password",class:"form-label"},"Password",-1),k=o("button",{type:"submit",class:"btn btn-primary rounded py-2 fs-5"}," 登入 ",-1);function E(t,e,n,a,r,i){return h(),f("form",{action:"",class:"d-grid gap-3 p-3",onSubmit:e[2]||(e[2]=u((...s)=>i.login&&i.login(...s),["prevent"]))},[o("div",null,[b,m(o("input",{type:"email",name:"Email",id:"email",placeholder:"請輸入 Email",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>r.user.username=s),required:"",autocomplete:""},null,512),[[l,r.user.username]])]),o("div",null,[g,m(o("input",{type:"password",name:"password",id:"password",placeholder:"請輸入 Password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>r.user.password=s),required:"",autocomplete:""},null,512),[[l,r.user.password]])]),k],32)}const D=c(_,[["render",E]]);export{D as default};
