import{M as y}from"./bootstrap.esm-434bcbc7.js";import{m as v,b as g}from"./axios-61e5193b.js";import{p as b}from"./productsStore-f2f79e5b.js";import{c as k}from"./cartsStore-babce666.js";import{k as P}from"./runtime-dom.esm-bundler-466e0a51.js";import{b7 as f,ak as l,m as i,n as t,F as c,au as u,a4 as p,aK as n,t as C,b4 as x,a6 as M,ao as I,al as S}from"./plugin-vueexport-helper-6c478766.js";import"./index-f28331f7.js";const{VITE_URL:V,VITE_APIPATH:w}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"panduola666",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0},E={data(){return{myModal:{},currentProduct:{},qty:1}},computed:{...v(b,["products","pagination","oldPage"])},methods:{...g(k,["getCarts"]),...g(b,["getProducts"]),addCart(o,a=1){const _={product_id:o,qty:a};this.$http.post(`${V}/api/${w}/cart`,{data:_}).then(d=>{alert(d.data.message),this.myModal.hide(),this.qty=1,this.getCarts()}).catch(d=>{alert(d.response.message)})}},mounted(){this.myModal=new y(this.$refs.productModal),this.getProducts(this.$route.query.page)}},r=o=>(I("data-v-52aae1a9"),o=o(),S(),o),T=r(()=>t("h1",null,"產品列表",-1)),q={class:"table table-hover align-middle text-center"},A=r(()=>t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1)),L={key:0,class:"m-0"},U={key:1},D={class:"m-0 text-danger fs-5"},B=["onClick"],R=["onClick"],z={class:"pagination justify-content-center"},N={class:"page-item"},j=r(()=>t("span",{"aria-hidden":"true"},"«",-1)),F=[j],H=["onClick"],O={class:"page-item"},K=r(()=>t("span",{"aria-hidden":"true"},"»",-1)),G=[K],J={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"productModal"},Q={class:"modal-dialog modal-dialog-centered modal-xl"},W={class:"modal-content"},X={class:"modal-header"},Y={class:"modal-title",id:"exampleModalLabel"},Z=r(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),$={class:"modal-body row"},tt={class:"col"},et=["src"],ot={class:"col"},st={class:"btn btn-primary rounded-pill"},nt=r(()=>t("p",null,"商品描述：",-1)),at={key:0},lt={key:1},it={class:"text-danger fs-4"},rt={class:"d-flex"},dt=["value"],ct=r(()=>t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1));function ut(o,a,_,d,s,h){return l(),i("div",null,[T,t("table",q,[A,t("tbody",null,[(l(!0),i(c,null,u(o.products,e=>(l(),i("tr",{key:e.id},[t("td",null,[t("div",{class:"img mx-auto",style:M([{width:"400px",height:"150px","background-position":"center","background-repeat":"no-repeat","background-size":"cover"},{"background-image":`url(${e.imageUrl})`}])},null,4)]),t("td",null,n(e.title),1),t("td",null,[e.price===e.origin_price?(l(),i("p",L,n(e.price)+" 元 ",1)):(l(),i("div",U,[t("del",null,"原價 "+n(e.origin_price)+" 元",1),t("p",D," 現在只要 "+n(e.price)+" 元 ",1)]))]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:m=>s.currentProduct=e}," 商品內容 ",8,B),t("button",{type:"button",class:"btn btn-outline-danger",onClick:m=>h.addCart(e.id)}," 加入購物車 ",8,R)])]))),128))])]),t("ul",z,[t("li",N,[t("button",{type:"button",class:p(["page-link",{disabled:!o.pagination.has_pre}]),"aria-label":"Previous",onClick:a[0]||(a[0]=e=>o.getProducts(o.pagination.current_page-1))},F,2)]),(l(!0),i(c,null,u(o.pagination.total_pages,e=>(l(),i("li",{class:"page-item",key:`第${e}頁`,onClick:m=>o.getProducts(e)},[t("button",{type:"button",class:p(["page-link",{active:e===o.pagination.current_page}])},n(e),3)],8,H))),128)),t("li",O,[t("button",{type:"button",class:p(["page-link",{disabled:!o.pagination.has_next}]),"aria-label":"Next",onClick:a[1]||(a[1]=e=>o.getProducts(o.pagination.current_page+1))},G,2)])]),t("div",J,[t("div",Q,[t("div",W,[t("div",X,[t("h5",Y,n(s.currentProduct.title),1),Z]),t("div",$,[t("div",tt,[t("img",{src:s.currentProduct.imageUrl,alt:"",class:"w-100",style:{"object-fit":"cover","max-height":"300px"}},null,8,et)]),t("div",ot,[t("h2",null,[C(n(s.currentProduct.title)+" ",1),t("span",st,n(s.currentProduct.category),1)]),nt,t("p",null,n(s.currentProduct.description),1),s.currentProduct.origin_price===s.currentProduct.price?(l(),i("p",at,n(s.currentProduct.price)+" 元 ",1)):(l(),i("div",lt,[t("del",null,"原價 "+n(s.currentProduct.origin_price)+" 元",1),t("p",it," 現在只要 "+n(s.currentProduct.price)+" 元 ",1)])),t("div",rt,[x(t("select",{name:"",id:"",class:"flex-fill","onUpdate:modelValue":a[2]||(a[2]=e=>s.qty=e)},[(l(),i(c,null,u(20,e=>t("option",{value:e,key:"數量"+e},n(e),9,dt)),64))],512),[[P,s.qty]]),t("button",{type:"button",class:"btn btn-danger",onClick:a[3]||(a[3]=e=>h.addCart(s.currentProduct.id,s.qty))}," 加入購物車 ")])])]),ct])])],512)])}const vt=f(E,[["render",ut],["__scopeId","data-v-52aae1a9"]]);export{vt as default};
